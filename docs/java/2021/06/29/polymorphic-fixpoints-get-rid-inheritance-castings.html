<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Polymorphic Fixpoints: get rid of inheritance castings! - Engineering Blog</title>
<meta name="description" content="Castings in Java are considered a bad practice.">


  <meta name="author" content="Juanjo Madrigal">
  
  <meta property="article:author" content="Juanjo Madrigal">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="Engineering Blog">
<meta property="og:title" content="Polymorphic Fixpoints: get rid of inheritance castings!">
<meta property="og:url" content="https://devoinc.github.io/java/2021/06/29/polymorphic-fixpoints-get-rid-inheritance-castings.html">


  <meta property="og:description" content="Castings in Java are considered a bad practice.">



  <meta property="og:image" content="https://devoinc.github.io/assets/images/posts/polymorphic_fixpoints/teaser.png">



  <meta name="twitter:site" content="@DEVO_devteam">
  <meta name="twitter:title" content="Polymorphic Fixpoints: get rid of inheritance castings!">
  <meta name="twitter:description" content="Castings in Java are considered a bad practice.">
  <meta name="twitter:url" content="https://devoinc.github.io/java/2021/06/29/polymorphic-fixpoints-get-rid-inheritance-castings.html">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://devoinc.github.io/assets/images/posts/polymorphic_fixpoints/teaser.png">
    
  

  



  <meta property="article:published_time" content="2021-06-29T00:00:00-05:00">



  <meta property="article:modified_time" content="2021-06-29T11:55:00-05:00">




<link rel="canonical" href="https://devoinc.github.io/java/2021/06/29/polymorphic-fixpoints-get-rid-inheritance-castings.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Devo Engineering Blog",
      "url": "https://devoinc.github.io/",
      "sameAs": ["https://twitter.com/DEVO_devteam","https://www.linkedin.com/company/devoinc/",null]
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Engineering Blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="icon" href="/assets/images/favicon/devo-favicon-190x190.svg" sizes="32x32">
<link rel="icon" href="/assets/images/favicon/devo-favicon-190x190.svg" sizes="192x192">
<link rel="apple-touch-icon" href="/assets/images/favicon/devo-favicon-190x190.svg">
<meta name="msapplication-TileImage" content="/assets/images/favicon/devo-favicon-190x190.svg">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/devo-theme/devo-logo-dark.svg" alt="Engineering Blog"></a>
        
        <a class="site-title" href="/">
          Engineering Blog
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/year-archive/">Posts</a>
            </li>
<li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li>
<li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>



    <div class="initial-content">
      
  







<div class="page__hero--overlay page__hero__basic" style="">
  <div class="wrapper">
    <div class="page__hero__header">
      
      <p class="page__category">Java</p>
      

      <h1 id="page-title" class="page__title" itemprop="headline">
        
        Polymorphic Fixpoints: get rid of inheritance castings!

        
      </h1>
      
      





  <p class="page__meta">
    
      

      <span class="page__meta-author">
          
      </span>

      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2021-06-29T00:00:00-05:00">June 29, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


      
      
    </div>

    
    <div class="page__hero__teaser">
         <img src="/assets/images/posts/polymorphic_fixpoints/teaser.png">
    </div>
    

    
    </div>
</div>

  
    <div class="page__share-wrapper--header">
<section class="page__share">
  
    <h4 class="page__share-title">Share this</h4>
  

  <a title="Twitter" href="https://twitter.com/intent/tweet?via=DEVO_devteam&amp;text=Polymorphic+Fixpoints%3A+get+rid+of+inheritance+castings%21%20https%3A%2F%2Fdevoinc.github.io%2Fjava%2F2021%2F06%2F29%2Fpolymorphic-fixpoints-get-rid-inheritance-castings.html" class="btn--social" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i></a>

  <a title="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevoinc.github.io%2Fjava%2F2021%2F06%2F29%2Fpolymorphic-fixpoints-get-rid-inheritance-castings.html" class="btn--social" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i></a>

  <a title="Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdevoinc.github.io%2Fjava%2F2021%2F06%2F29%2Fpolymorphic-fixpoints-get-rid-inheritance-castings.html" class="btn--social" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i></a>
</section>
</div>
  




<div id="main" role="main">

  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/authors/juanjo_madrigal_avatar.png" alt="Juanjo Madrigal" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Juanjo Madrigal</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Maths + Computer Science + Cool Stuff</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li><a href="mailto:juanjo.madrigal@devo.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://twitter.com/jxm_math" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Polymorphic Fixpoints: get rid of inheritance castings!">
    <meta itemprop="description" content="Castings in Java are considered a bad practice.">
    <meta itemprop="datePublished" content="2021-06-29T00:00:00-05:00">
    <meta itemprop="dateModified" content="2021-06-29T11:55:00-05:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">
        
        <p>Castings in Java are considered a bad practice.</p>

<p>Java’s strong static typing is a powerful compile-time safeguard. 
It checks that every method receives and returns objects with the features 
they are supposed to have. It makes sure that everything is well assembled.</p>

<p>Castings open a backdoor in this mechanism by allowing 
unchecked type transformations between classes involved in an inheritance. 
Although castings hardly have any impact in performance, they may lead to 
runtime errors, which in part defeats the very purpose of strong static typing.</p>

<p>It is commonly agreed that a repeated use of castings denotes a bad design. 
However, there are some cases in which avoiding them is far from obvious. 
One of these cases is having several subclasses inheriting from a superclass 
whose methods have argument or return types referring 
to the subclasses themselves:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="no">A</span> <span class="nf">method</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{...};</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">B</span> <span class="kd">extends</span> <span class="no">A</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="no">B</span> <span class="nf">method</span><span class="o">(</span><span class="no">B</span> <span class="n">other</span><span class="o">)</span> <span class="o">{...};</span> <span class="c1">// !!</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Is it possible to avoid castings here?</p>

<h1 id="a-tale-of-two-castings">A Tale of Two Castings</h1>

<p>Suppose that we have found a really good algorithm to find 
long chains of elements. It takes elements from a <code class="language-plaintext highlighter-rouge">Set&lt;T&gt;</code>, 
and for any two of them, it needs to know if they may be chained. 
With this information, it efficiently builds long chains of elements. 
For instance, it may find knight tours in a chessboard</p>

<p><img src="/assets/images/posts/polymorphic_fixpoints/knight_tour.jpg"></p>

<p>or it could create lists of words that change only one letter in each step:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PASS
PAST
CAST
COST
MOST
LOST
LOFT
...
</code></pre></div></div>

<p>The skeleton of our <code class="language-plaintext highlighter-rouge">Chainer</code> would be something like this:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Chainer</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">final</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Chainer</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">items</span> <span class="o">=</span> <span class="n">items</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">longChain</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// try to build a very long chain</span>
    <span class="c1">//</span>
    <span class="c1">// during the process, lots of pairs of elements are taken from items;</span>
    <span class="c1">// for each pair we need to check whether they may be chained or not</span>
  <span class="o">};</span>

  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">joiningChain</span><span class="o">(</span><span class="no">T</span> <span class="n">a</span><span class="o">,</span> <span class="no">T</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// try to build a chain joining a and b - again, pairs of elements </span>
    <span class="c1">// are checked for "chainability"</span>
  <span class="o">};</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The type <code class="language-plaintext highlighter-rouge">T</code> does not provide the logic of chainable elements. 
So we build a <code class="language-plaintext highlighter-rouge">Chainable</code> interface to provide this logic:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Chainer.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Chainer</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Chainable</span><span class="o">&gt;</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>

<span class="c1">// Chainable.java</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Chainable</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="nc">Chainable</span> <span class="n">other</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// CKnight.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CKnight</span> <span class="kd">implements</span> <span class="nc">Chainable</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="nc">Chainable</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// CString.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CString</span> <span class="kd">implements</span> <span class="nc">Chainable</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="nc">Chainable</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>You see, we already have two examples of <code class="language-plaintext highlighter-rouge">Chainable</code>: chessboard squares 
and strings. Two squares may be chained if connected by a single knight jump, 
and two strings may be chained if only one letter differs. The logic itself 
is not very hard to implement. However, one may perceive a little subtlety 
with the types.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// CKnight.java</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="nc">Chainable</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">CKnight</span> <span class="n">k</span> <span class="o">=</span> <span class="o">(</span><span class="nc">CKnight</span><span class="o">)</span><span class="n">other</span><span class="o">;</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The right thing would be to compare a <code class="language-plaintext highlighter-rouge">CKnight</code> with another <code class="language-plaintext highlighter-rouge">CKnight</code>, 
but the inherited method requires comparing with a <code class="language-plaintext highlighter-rouge">Chainable</code>. 
This forces us to begin the comparison with a downcasting.</p>

<p>But castings make programmers sad</p>

<p><img src="/assets/images/posts/polymorphic_fixpoints/cast1.png"></p>

<p>Another possibility would be to provide a <code class="language-plaintext highlighter-rouge">BiPredicate&lt;T,T&gt;</code> to the <code class="language-plaintext highlighter-rouge">Chainer</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Chainer</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">final</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">;</span>
  <span class="kd">final</span> <span class="nc">BiPredicate</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">areChainable</span><span class="o">;</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>but this would defeat our aim to encapsulate the behavior in the type itself.</p>

<hr>

<p>Anoter example, this one a bit more complicated: imagine that we are building 
an applet that deals with 2-D geometric elements: points, curves, polygons, 
circles, splines, …</p>

<p>One may conceive different approaches to model 2-D regions. We could think of 
a numerical approach, where we would model the region using 
some sort of bitmap, or we could go towards a more analytic approach, 
keeping track of the atomic components. And perhaps both approaches 
are useful and can be used simultaneously (one to draw stuff on the screen 
and the other to perform accurate calculations).</p>

<p><img src="/assets/images/posts/polymorphic_fixpoints/algebraic_set.png"></p>

<p>All the approaches would need to implement a similar set of 
algebraic operations including union, intersection, complement and difference. 
Some of these operations may be computed in terms of others. This way we create 
the <code class="language-plaintext highlighter-rouge">AlgebraicSet</code> interface. The interface provides a default implementation 
for <code class="language-plaintext highlighter-rouge">intersection</code> and <code class="language-plaintext highlighter-rouge">diff</code>, calculated using the other two operations 
(<code class="language-plaintext highlighter-rouge">union</code> and <code class="language-plaintext highlighter-rouge">complement</code>).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AlgebraicSet</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nc">AlgebraicSet</span> <span class="nf">union</span><span class="o">(</span><span class="nc">AlgebraicSet</span> <span class="n">other</span><span class="o">);</span>
  <span class="kd">public</span> <span class="nc">AlgebraicSet</span> <span class="nf">complement</span><span class="o">();</span>
  
  <span class="c1">// --------</span>
  
  <span class="kd">public</span> <span class="k">default</span> <span class="nc">AlgebraicSet</span> <span class="nf">intersection</span><span class="o">(</span><span class="nc">AlgebraicSet</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">complement</span><span class="o">().</span><span class="na">union</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">complement</span><span class="o">()).</span><span class="na">complement</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="k">default</span> <span class="nc">AlgebraicSet</span> <span class="nf">diff</span><span class="o">(</span><span class="nc">AlgebraicSet</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">intersection</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">complement</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Cool!! Let’s now implement <code class="language-plaintext highlighter-rouge">BitMap</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BitMap</span> <span class="kd">extends</span> <span class="nc">AlgebraicSet</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// perhaps it could be implemented as some sort of double array of booleans?</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">BitMap</span> <span class="nf">union</span><span class="o">(</span><span class="nc">AlgebraicSet</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">BitMap</span> <span class="n">bitmapOther</span> <span class="o">=</span> <span class="o">(</span><span class="nc">BitMap</span><span class="o">)</span><span class="n">other</span><span class="o">;</span>
    <span class="c1">// bitwise AND</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nc">BitMap</span> <span class="nf">complement</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// bitwise NOT</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Did you notice?</p>

<p><img src="/assets/images/posts/polymorphic_fixpoints/cast2.png"></p>

<p>And this time it’s slightly worse: there is a downcasting for the argument type 
much like in <code class="language-plaintext highlighter-rouge">Chainable</code>, but there’s also a difference in the return type. 
The initial methods to be implemented were 
<code class="language-plaintext highlighter-rouge">AlgebraicSet union(AlgebraicSet other)</code> and <code class="language-plaintext highlighter-rouge">AlgebraicSet complement()</code>; 
Java allows tweaking the return type with <code class="language-plaintext highlighter-rouge">BitMap union(AlgebraicSet other)</code> 
and <code class="language-plaintext highlighter-rouge">BitMap complement()</code>, but it’s still ugly nevertheless.</p>

<p>Let’s hope better luck for our symbolic approach in <code class="language-plaintext highlighter-rouge">Shape</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Shape</span> <span class="kd">implements</span> <span class="nc">AlgebraicSet</span> <span class="o">{</span>

  <span class="c1">// union and complement in terms of certain subclases</span>
  <span class="kd">public</span> <span class="nc">Shape</span> <span class="nf">union</span><span class="o">(</span><span class="nc">AlgebraicSet</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Shape</span> <span class="n">symbOther</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Shape</span><span class="o">)</span><span class="n">other</span><span class="o">;</span> <span class="c1">// Casting :/</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Union</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">symbOther</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nc">Shape</span> <span class="nf">complement</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Complement</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// checking whether a region contains a point</span>
  <span class="c1">// BitMap does not implement it because it's not accurate enough</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">);</span>

  <span class="c1">// --------</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Union</span> <span class="kd">extends</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="nc">Shape</span> <span class="n">a</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Shape</span> <span class="n">b</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Union</span><span class="o">(</span><span class="nc">Shape</span> <span class="n">a</span><span class="o">,</span> <span class="nc">Shape</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">||</span> <span class="n">b</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="o">}</span>

  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Complement</span> <span class="kd">extends</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="nc">Shape</span> <span class="n">a</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Complement</span><span class="o">(</span><span class="nc">Shape</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="n">a</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="o">}</span>

  <span class="o">}</span>

  <span class="c1">// a couple of basic shapes </span>
  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Rectangle</span> <span class="kd">extends</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">x0</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">x1</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">y0</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">y1</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">double</span> <span class="n">x0</span><span class="o">,</span> <span class="kt">double</span> <span class="n">x1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y0</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y1</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">x0</span> <span class="o">=</span> <span class="n">x0</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">x1</span> <span class="o">=</span> <span class="n">x1</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">y0</span> <span class="o">=</span> <span class="n">y0</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">y1</span> <span class="o">=</span> <span class="n">y1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">x0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">x1</span> <span class="o">&amp;&amp;</span> <span class="n">y0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">y1</span><span class="o">;</span>
    <span class="o">}</span>

  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">extends</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">xc</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">yc</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="kt">double</span> <span class="n">r</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Circle</span><span class="o">(</span><span class="kt">double</span> <span class="n">xc</span><span class="o">,</span> <span class="kt">double</span> <span class="n">yc</span><span class="o">,</span> <span class="kt">double</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">xc</span> <span class="o">=</span> <span class="n">xc</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">yc</span> <span class="o">=</span> <span class="n">yc</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">(</span><span class="n">x</span><span class="o">-</span><span class="n">xc</span><span class="o">)*(</span><span class="n">x</span><span class="o">-</span><span class="n">xc</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">y</span><span class="o">-</span><span class="n">yc</span><span class="o">)*(</span><span class="n">y</span><span class="o">-</span><span class="n">yc</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="o">*</span><span class="n">r</span><span class="o">;</span>
    <span class="o">}</span>

  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Ok. No problem so far. Let’s check that everything’s peachy.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="k">new</span> <span class="nc">Circle</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">)).</span><span class="na">contains</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span> 
<span class="c1">// OK --&gt; true</span>
</code></pre></div></div>

<p>Great.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">).</span><span class="na">diff</span><span class="o">(</span><span class="k">new</span> <span class="nc">Circle</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">)).</span><span class="na">contains</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span> 
<span class="c1">// KO --&gt; The method contains(int, int) is undefined for the type AlgebraicSet</span>
</code></pre></div></div>

<p>What??!! The method <code class="language-plaintext highlighter-rouge">diff</code> was not implemented in <code class="language-plaintext highlighter-rouge">Shape</code>, 
but in <code class="language-plaintext highlighter-rouge">AlgebraicSet</code>, and therefore its return type is <code class="language-plaintext highlighter-rouge">AlgebraicSet</code>. 
Although semantically equivalent, <code class="language-plaintext highlighter-rouge">union</code> and <code class="language-plaintext highlighter-rouge">diff</code> work with different types. 
So each time we use <code class="language-plaintext highlighter-rouge">diff</code> we have to perform another downcasting</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">((</span><span class="nc">Shape</span><span class="o">)</span><span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">).</span><span class="na">diff</span><span class="o">(</span><span class="k">new</span> <span class="nc">Circle</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">))).</span><span class="na">contains</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span> 
<span class="c1">// (╯°□°)╯︵ ┻━┻</span>
</code></pre></div></div>

<p>and this is <em>too much</em>. We need to find a better solution.</p>

<h1 id="a-wannabe-type">A wannabe type</h1>

<p>In both examples, <code class="language-plaintext highlighter-rouge">Chainable</code> and <code class="language-plaintext highlighter-rouge">AlgebraicSet</code>, the problem is more or less 
the same: we want to build certain logic that will be inherited by 
multiple subclasses, and we need to have the current subclass type 
in the implementation.</p>

<p>How can we do this? Imagine that we have a type <code class="language-plaintext highlighter-rouge">Base</code> that will be extended 
by some type <code class="language-plaintext highlighter-rouge">T</code>; inside <code class="language-plaintext highlighter-rouge">Base</code> we want to refer to <code class="language-plaintext highlighter-rouge">T</code> so… why not? 
We introduce <code class="language-plaintext highlighter-rouge">T</code> as a type parameter.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="c1">// Base will eventually become T</span>
</code></pre></div></div>

<p>Now we may use <code class="language-plaintext highlighter-rouge">T</code> to define argument and return types. But, on the other hand, 
<code class="language-plaintext highlighter-rouge">T</code> cannot be <em>anything</em>, it has to extend <code class="language-plaintext highlighter-rouge">Base</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Base</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>But <code class="language-plaintext highlighter-rouge">Base</code> is no longer a raw type; it needs to be told about <code class="language-plaintext highlighter-rouge">T</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span>
</code></pre></div></div>

<p>What’s going on here? Is this a circular definition? Nope, 
it’s perfect Java syntax. You can impose type predicates on the parameters. 
If you find some <code class="language-plaintext highlighter-rouge">T</code> satistying the predicate, you’ll be able to instantiate 
a <code class="language-plaintext highlighter-rouge">Base&lt;T&gt;</code>. If the predicate is impossible to fulfill, then you won’t be able 
to instantiate a <code class="language-plaintext highlighter-rouge">Base&lt;T&gt;</code>, although everything will compile fine.</p>

<p>Suppose that <code class="language-plaintext highlighter-rouge">Derived</code> is to extend <code class="language-plaintext highlighter-rouge">Base</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Derived</span> <span class="kd">extends</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="nc">Derived</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Look, it works!! <code class="language-plaintext highlighter-rouge">Base&lt;Derived&gt;</code> is ok because <code class="language-plaintext highlighter-rouge">Derived extends Base&lt;Derived&gt;</code> 
satisfies the condition <code class="language-plaintext highlighter-rouge">T extends Base&lt;T&gt;</code>. And now <code class="language-plaintext highlighter-rouge">Derived</code> inherits 
all the logic in <code class="language-plaintext highlighter-rouge">Base</code> with all the <code class="language-plaintext highlighter-rouge">T</code> replaced by <code class="language-plaintext highlighter-rouge">Derived</code>. 
Think of <code class="language-plaintext highlighter-rouge">Base&lt;T&gt;</code> as being in mid-metamorphosis towards <code class="language-plaintext highlighter-rouge">T</code>: 
that’s why <code class="language-plaintext highlighter-rouge">Derived</code> extends <code class="language-plaintext highlighter-rouge">Base&lt;Derived&gt;</code>, because <code class="language-plaintext highlighter-rouge">Base&lt;Derived&gt;</code> 
was already prepared to be transformed in <code class="language-plaintext highlighter-rouge">Derived</code>.</p>

<p>How does this approach translate in our previous examples?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Chainable.java</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="no">C</span> <span class="kd">extends</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="no">C</span> <span class="n">other</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// CKnight.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CKnight</span> <span class="kd">implements</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="nc">CKnight</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="nc">CKnight</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">};</span>
<span class="o">}</span>

<span class="c1">// CString.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CString</span> <span class="kd">implements</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="nc">CString</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mayBeChainedTo</span><span class="o">(</span><span class="nc">CString</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">};</span>
<span class="o">}</span>

<span class="c1">// Chainer.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Chainer</span><span class="o">&lt;</span><span class="no">C</span> <span class="kd">extends</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
  
  <span class="kd">final</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Chainer</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">items</span> <span class="o">=</span> <span class="n">items</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;</span> <span class="nf">longChain</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">};</span>

  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;</span> <span class="nf">joiningChain</span><span class="o">(</span><span class="no">C</span> <span class="n">a</span><span class="o">,</span> <span class="no">C</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">};</span>
  
<span class="o">}</span>
</code></pre></div></div>

<p>Did you see? No castings!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AlgebraicSet.java</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="no">A</span> <span class="kd">extends</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="no">A</span><span class="o">&gt;&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="no">A</span> <span class="nf">union</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">);</span>
  <span class="kd">public</span> <span class="no">A</span> <span class="nf">complement</span><span class="o">();</span>

  <span class="c1">// --------</span>

  <span class="kd">public</span> <span class="k">default</span> <span class="no">A</span> <span class="nf">intersection</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">complement</span><span class="o">().</span><span class="na">union</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">complement</span><span class="o">()).</span><span class="na">complement</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="k">default</span> <span class="no">A</span> <span class="nf">diff</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">intersection</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">complement</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="c1">// BitMap.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BitMap</span> <span class="kd">implements</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="nc">BitMap</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="c1">// ...</span>

  <span class="kd">public</span> <span class="nc">BitMap</span> <span class="nf">union</span><span class="o">(</span><span class="nc">BitMap</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// bitwise AND</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nc">BitMap</span> <span class="nf">complement</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// bitwise NOT</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="c1">// Shape.java</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Shape</span> <span class="kd">implements</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="nc">Shape</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nc">Shape</span> <span class="nf">union</span><span class="o">(</span><span class="nc">Shape</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Union</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">other</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nc">Shape</span> <span class="nf">complement</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Complement</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kt">double</span> <span class="n">x</span><span class="o">,</span> <span class="kt">double</span> <span class="n">y</span><span class="o">);</span>

  <span class="c1">// ...</span>
  
<span class="o">}</span>
</code></pre></div></div>

<p>Fabulous! Our types match perfectly!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="k">new</span> <span class="nc">Circle</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">)).</span><span class="na">contains</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// OK</span>
<span class="k">new</span> <span class="nf">Rectangle</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,-</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">).</span><span class="na">diff</span><span class="o">(</span><span class="k">new</span> <span class="nc">Circle</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">)).</span><span class="na">contains</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>  <span class="c1">// OK</span>
</code></pre></div></div>

<p>Strange? Witchcraft? Well, you’d be surprised to know that this technique 
is already being used in the core of Java: the keyword <code class="language-plaintext highlighter-rouge">enum</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Suit</span> <span class="o">{</span><span class="no">HEART</span><span class="o">,</span> <span class="no">DIAMOND</span><span class="o">,</span> <span class="no">CLUB</span><span class="o">,</span> <span class="no">SPADE</span><span class="o">};</span>
</code></pre></div></div>

<p>is indeed syntactic sugar of
<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Enum.html">a class <code class="language-plaintext highlighter-rouge">Enum</code></a>
that uses this “recursive definition”</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Enum</span><span class="o">&lt;</span><span class="no">E</span> <span class="kd">extends</span> <span class="nc">Enum</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;&gt;</span> <span class="o">{</span> 
    <span class="o">...</span> 
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Suit</span> <span class="kd">extends</span> <span class="nc">Enum</span><span class="o">&lt;</span><span class="nc">Suit</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Suit</span> <span class="no">HEART</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Suit</span> <span class="no">DIAMOND</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Suit</span> <span class="no">CLUB</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Suit</span> <span class="no">SPADE</span><span class="o">;</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This makes sense because all our <code class="language-plaintext highlighter-rouge">enum</code> have common properties 
but we want each subclass to be compared to members of the same subclass, 
much like with the <code class="language-plaintext highlighter-rouge">Chainable</code> elements. Yes, sometimes you have to reason 
<em>in terms of your subclass types</em>.</p>

<h1 id="polymorphic-fixpoint">Polymorphic Fixpoint</h1>

<p>We’re very happy with our trick and ready to move on. Let’s add another common 
set operation to <code class="language-plaintext highlighter-rouge">AlgebraicSet</code>: the symmetric difference.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="k">default</span> <span class="no">A</span> <span class="nf">symDiff</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">diff</span><span class="o">(</span><span class="n">other</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">diff</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
<span class="o">}</span>
<span class="c1">// The method diff(A) in the type AlgebraicSet&lt;A&gt; </span>
<span class="c1">// is not applicable for the arguments (AlgebraicSet&lt;A&gt;)</span>
</code></pre></div></div>

<p>Yikes!! Since this method is implemented in the parent class, 
<code class="language-plaintext highlighter-rouge">this</code> refers to the parent class, and not to the child class. 
But we need <code class="language-plaintext highlighter-rouge">this</code> to be the child class. What can we do?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Base.java</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="no">T</span> <span class="kd">extends</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
  <span class="kd">abstract</span> <span class="kd">public</span> <span class="no">T</span> <span class="nf">getChild</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">// Derived.java</span>
<span class="kd">class</span> <span class="nc">Derived</span> <span class="kd">extends</span> <span class="nc">Base</span><span class="o">&lt;</span><span class="nc">Derived</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nc">Derived</span> <span class="nf">getChild</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Looks good! To formalize this process we’ll create a <code class="language-plaintext highlighter-rouge">Fixpoint</code> interface 
that will be implemented by all the classes using this 
<em>polymorphic fixpoint</em> trick:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Fixpoint</span><span class="o">&lt;</span><span class="no">X</span> <span class="kd">extends</span> <span class="nc">Fixpoint</span><span class="o">&lt;</span><span class="no">X</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="no">X</span> <span class="nf">fixpoint</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Let’s introduce <code class="language-plaintext highlighter-rouge">Fixpoint</code> in <code class="language-plaintext highlighter-rouge">Chainable</code>…</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Chainable.java</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="no">C</span> <span class="kd">extends</span> <span class="nc">Chainable</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;&gt;</span> <span class="kd">extends</span> <span class="nc">Fixpoint</span><span class="o">&lt;</span><span class="no">C</span><span class="o">&gt;</span>

<span class="c1">// CKnight.java</span>
<span class="kd">public</span> <span class="nc">CKnight</span> <span class="nf">fixpoint</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span> <span class="o">}</span>

<span class="c1">// CString.java</span>
<span class="kd">public</span> <span class="nc">CString</span> <span class="nf">fixpoint</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span> <span class="o">}</span>
</code></pre></div></div>

<p>… and in <code class="language-plaintext highlighter-rouge">AlgebraicSet</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AlgebraicSet.java</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="no">A</span> <span class="kd">extends</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="no">A</span><span class="o">&gt;&gt;</span> <span class="kd">extends</span> <span class="nc">Fixpoint</span><span class="o">&lt;</span><span class="no">A</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="no">A</span> <span class="nf">union</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">);</span>
  <span class="kd">public</span> <span class="no">A</span> <span class="nf">complement</span><span class="o">();</span>

  <span class="c1">// --------</span>

  <span class="kd">public</span> <span class="k">default</span> <span class="no">A</span> <span class="nf">intersection</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">fixpoint</span><span class="o">().</span><span class="na">complement</span><span class="o">().</span><span class="na">union</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">complement</span><span class="o">()).</span><span class="na">complement</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="k">default</span> <span class="no">A</span> <span class="nf">diff</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">fixpoint</span><span class="o">().</span><span class="na">intersection</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">complement</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="k">default</span> <span class="no">A</span> <span class="nf">symDiff</span><span class="o">(</span><span class="no">A</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">fixpoint</span><span class="o">().</span><span class="na">diff</span><span class="o">(</span><span class="n">other</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">diff</span><span class="o">(</span><span class="n">fixpoint</span><span class="o">()));</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="c1">// BitMap.java</span>
<span class="kd">public</span> <span class="nc">BitMap</span> <span class="nf">fixpoint</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span> <span class="o">}</span>

<span class="c1">// Shape.java</span>
<span class="kd">public</span> <span class="nc">Shape</span> <span class="nf">fixpoint</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span> <span class="o">}</span>
</code></pre></div></div>

<p>Did you see? In <code class="language-plaintext highlighter-rouge">AlgebraicSet</code> we are now using <code class="language-plaintext highlighter-rouge">fixpoint()</code>, of type <code class="language-plaintext highlighter-rouge">A</code>, 
instead of <code class="language-plaintext highlighter-rouge">this</code>, of type <code class="language-plaintext highlighter-rouge">AlgebraicSet&lt;A&gt;</code>. Same happens with <code class="language-plaintext highlighter-rouge">Chainable</code>.</p>

<p>Why “fixpoint”? Because we’re asking each instance to “evolve” to its 
“more developed version”, but in the final subclases this evolution 
is the identity, and thus the <code class="language-plaintext highlighter-rouge">return this;</code>. And why “polymorphic”? 
Well, becuase this “more developed version” takes lots of different forms 
indeed.</p>

<p>Altogether, we have built the following hierarchy of classes/interfaces:</p>

<p><img src="/assets/images/posts/polymorphic_fixpoints/dep_tree.png"></p>

<p>The dashed objects incorporate the polymorphic fixpoint trick in their 
type definition and cannot be instantiated until the thick objects 
implement <code class="language-plaintext highlighter-rouge">fixpoint() { return this; }</code> and no longer receive a type parameter. 
From this moment on, type inheritance is completely standard.</p>

<p>Now we can let our imagination fly and come up with all kinds of fancy stuff, 
like for example a fluent logger able to write the status of an object 
at any time</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Logger</span><span class="o">&lt;</span><span class="no">L</span> <span class="kd">extends</span> <span class="nc">Logger</span><span class="o">&lt;</span><span class="no">L</span><span class="o">&gt;&gt;</span> <span class="kd">extends</span> <span class="nc">Fixpoint</span><span class="o">&lt;</span><span class="no">L</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="k">default</span> <span class="kd">public</span> <span class="no">L</span> <span class="nf">log</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">repr</span><span class="o">());</span>
    <span class="k">return</span> <span class="nf">fixpoint</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">repr</span><span class="o">();</span>

<span class="o">}</span>

<span class="c1">// BitMap.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BitMap</span> <span class="kd">implements</span> <span class="nc">AlgebraicSet</span><span class="o">&lt;</span><span class="nc">BitMap</span><span class="o">&gt;,</span> <span class="nc">Logger</span><span class="o">&lt;</span><span class="nc">BitMap</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="c1">// ...</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">repr</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// some other file</span>
<span class="k">new</span> <span class="nf">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">).</span><span class="na">log</span><span class="o">().</span><span class="na">union</span><span class="o">(</span><span class="k">new</span> <span class="nc">BitMap</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">));</span>
</code></pre></div></div>

<h1 id="wrapping-up">Wrapping up</h1>

<p>To sum up: the polymorphic fixpoint trick is very useful to <strong>avoid castings</strong> 
in situations where a behavior is to be extended by 
several different implementations but needs to 
<strong>refer to the implementations themselves</strong>.</p>

        
      </section>

      <footer class="page__meta">
        

        


  <p class="page__taxonomy">
    <span itemprop="keywords">
    
      <a href="/tags/#inheritance" class="page__taxonomy-item" rel="tag">inheritance</a>
    
      <a href="/tags/#java" class="page__taxonomy-item" rel="tag">java</a>
    
    </span>
  </p>





        <div class="page__meta__inner wrapper">
          
  <p class="page__date">Updated: <time datetime="2021-06-29">June 29, 2021</time></p>


          
            <div class="page__share-wrapper">
<section class="page__share">
  
    <h4 class="page__share-title">Share this</h4>
  

  <a title="Twitter" href="https://twitter.com/intent/tweet?via=DEVO_devteam&amp;text=Polymorphic+Fixpoints%3A+get+rid+of+inheritance+castings%21%20https%3A%2F%2Fdevoinc.github.io%2Fjava%2F2021%2F06%2F29%2Fpolymorphic-fixpoints-get-rid-inheritance-castings.html" class="btn--social" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i></a>

  <a title="Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevoinc.github.io%2Fjava%2F2021%2F06%2F29%2Fpolymorphic-fixpoints-get-rid-inheritance-castings.html" class="btn--social" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i></a>

  <a title="Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdevoinc.github.io%2Fjava%2F2021%2F06%2F29%2Fpolymorphic-fixpoints-get-rid-inheritance-castings.html" class="btn--social" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i></a>
</section>
</div>
          
        </div>
      </footer>

      
  <nav class="pagination">
    
      <a href="/troubleshooting/2021/05/28/galidevo-galilei.html" class="pagination--pager" title="Galidevo Galilei
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    <div class="archive__item__inner">
      
      <p class="archive__item-category">Troubleshooting</p>
      
      <h2 class="archive__item-title no_toc" itemprop="headline">
        
        <a href="/troubleshooting/2021/05/28/galidevo-galilei.html" rel="permalink">Galidevo Galilei
</a>
        
      </h2>
      <p class="archive__item-excerpt" itemprop="description">Galileo Galilei was born in Pisa in 1564 and lived a very adventurous life. He
studied gravity, motion, inertia and astronomy among others. He was so importa...</p>
      





  <p class="page__meta">
    
      

      <span class="page__meta-author">
          
      </span>

      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2021-05-28T00:00:00-05:00">May 28, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          13 minute read
        
      </span>
    
  </p>


    </div>
    
      <div class="archive__item-teaser">
        <img src="/assets/images/posts/galidevo_galilei/teaser.jpg" alt="">
      </div>
    
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

        <div class="cta-bar">
    <div class="container cta-bar__inner">
        <div class="cta-bar__content flow-content--sm">
            <div class="u-left-text">
                <h3 class="cta-bar__title">We’re Hiring!</h3>
                <p>Do you want to help disrupt the economics of data? Enable customers to speed time to action and gain
                    insight to drive their business? </p>
            </div>
            <div class="cta-line">
            </div>
        </div>
        <div class="cta-bar__button">
            <a target="_blank" href="https://www.devo.com/company/working-at-devo/careers/%22" class="button -dark">Careers</a>
        </div>
    </div>
</div>

<div class="footer__upper">
    <div class="container">
        <div class="footer__nav">
            <nav class="footer__column flow-content--sm">


                <h2 class="footer__navHeading"><a target="_blank" href="https://www.devo.com/platform/">Platform</a></h2>


                <ul class="footer__navList flow-content--xs">

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/platform/how-devo-works/">How
                        Devo Works</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/platform/how-devo-works/applications/security-operations/">Security
                        Operations</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/platform/how-devo-works/applications/service-operations/">Service
                        Operations</a></li>

                    <li class="footer__navItem">
<a target="_blank" href="https://www.devo.com/platform/integrations/">Integrations</a>
                    </li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/platform/machine-learning-workbench/">Machine Learning
                        Workbench</a></li>
                </ul>

            </nav>
            <nav class="footer__column flow-content--sm">


                <h2 class="footer__navHeading"><a target="_blank" href="https://www.devo.com/solutions/">Solutions</a></h2>


                <ul class="footer__navList flow-content--xs">

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/solutions/soc-transformation/">SOC
                        Transformation</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/solutions/siem-replacement-and-siem-augmentation/">SIEM
                        Replacement and SIEM Augmentation</a></li>

                    <li class="footer__navItem">
<a target="_blank" href="https://www.devo.com/solutions/observability/">Observability</a>
                    </li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/solutions/cloud-native-log-management/">Cloud Native
                        Log Management</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/solutions/security/">Security</a></li>
                </ul>

            </nav>
            <nav class="footer__column flow-content--sm">


                <h2 class="footer__navHeading"><a target="_blank" href="https://www.devo.com/customers/">Customers</a></h2>


                <ul class="footer__navList flow-content--xs">

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/customers/customer-experience-journey/">Customer
                        Experience</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/customers/customer-success-stories/">Customer Success
                        Stories</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/customers/support-training/">Support
                        &amp; Training</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/customers/professional-services/">Professional
                        Services</a></li>
                </ul>

            </nav>
            <nav class="footer__column flow-content--sm">


                <h2 class="footer__navHeading">
<a target="_blank" href="https://www.devo.com/resource-center/resources/">Resources</a>
                </h2>


                <ul class="footer__navList flow-content--xs">

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/resource-center/">Resource
                        Center</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/blog/">Blog</a></li>
                </ul>

            </nav>
            <nav class="footer__column flow-content--sm">


                <h2 class="footer__navHeading"><a target="_blank" href="https://www.devo.com/company/">Company</a></h2>


                <ul class="footer__navList flow-content--xs">

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/company/">Company</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/company/meet-devo/">Meet
                        Devo</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/company/leadership/">Leadership</a></li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/company/working-at-devo/careers/">Careers</a></li>

                    <li class="footer__navItem">
<a target="_blank" href="https://www.devo.com/company/partners/">Partners</a>
                    </li>

                    <li class="footer__navItem">
<a target="_blank" href="https://www.devo.com/company/newsroom/">Newsroom</a>
                    </li>

                    <li class="footer__navItem"><a target="_blank" href="https://www.devo.com/company/events/">Events</a></li>

                    <li class="footer__navItem">
<a target="_blank" href="https://www.devo.com/company/contact-us/">Contact</a>
                    </li>
                </ul>

            </nav>
        </div>
        <div class="footer__colophon">

            <img alt="Devo" class="footer__logo" src="/assets/images/devo-theme/devo-logo-white.svg">

            <div class="footer__info flow-content--sm">
                <p class="footer__disclaimer ">Devo is the only cloud-native logging and security analytics platform
                    that releases the full potential of all your data to empower bold, confident action when it matters
                    most.</p>
                <div class="footer__social">


                    <a href="https://twitter.com/devo_inc" target="_blank">
                        <svg aria-hidden="true" class="svg-inline--fa fa-twitter fa-w-16" data-icon="twitter" data-prefix="fab" focusable="false" role="img" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" fill="currentColor"></path>
                        </svg>
                    </a>


                    <a href="https://www.youtube.com/channel/UCC8gq9iZiHkZMcdztzqHP8Q" target="_blank">
                        <svg class="ionicon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><title>Logo
                            Youtube</title>
                            <path d="M508.64 148.79c0-45-33.1-81.2-74-81.2C379.24 65 322.74 64 265 64h-18c-57.6 0-114.2 1-169.6 3.6C36.6 67.6 3.5 104 3.5 149 1 184.59-.06 220.19 0 255.79q-.15 53.4 3.4 106.9c0 45 33.1 81.5 73.9 81.5 58.2 2.7 117.9 3.9 178.6 3.8q91.2.3 178.6-3.8c40.9 0 74-36.5 74-81.5 2.4-35.7 3.5-71.3 3.4-107q.34-53.4-3.26-106.9zM207 353.89v-196.5l145 98.2z"></path>
                        </svg>
                    </a>


                    <a href="https://www.linkedin.com/company/devoinc/" target="_blank">
                        <svg class="ionicon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><title>Logo
                            Linkedin</title>
                            <path d="M444.17 32H70.28C49.85 32 32 46.7 32 66.89v374.72C32 461.91 49.85 480 70.28 480h373.78c20.54 0 35.94-18.21 35.94-38.39V66.89C480.12 46.7 464.6 32 444.17 32zm-273.3 373.43h-64.18V205.88h64.18zM141 175.54h-.46c-20.54 0-33.84-15.29-33.84-34.43 0-19.49 13.65-34.42 34.65-34.42s33.85 14.82 34.31 34.42c-.01 19.14-13.31 34.43-34.66 34.43zm264.43 229.89h-64.18V296.32c0-26.14-9.34-44-32.56-44-17.74 0-28.24 12-32.91 23.69-1.75 4.2-2.22 9.92-2.22 15.76v113.66h-64.18V205.88h64.18v27.77c9.34-13.3 23.93-32.44 57.88-32.44 42.13 0 74 27.77 74 87.64z"></path>
                        </svg>
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="footer__lower">
    <div class="container">
        <div class="footer__lowerInner">
            <div class="footer__copyright">
                <p class="small">© 2021 Devo Inc. All Rights Reserved.</p>
            </div>
            <div class="footer__lowerLinks small">

                <a class="footer__lowerLink" target="_blank" href="https://www.devo.com/legal/">Legal</a>
                <span>|</span>

                <a class="footer__lowerLink" target="_blank" href="https://www.devo.com/privacy/">Privacy</a>
                <span>|</span>

                <a class="footer__lowerLink" target="_blank" href="https://www.devo.com/cookies/">Cookies</a>

            </div>
        </div>
    </div>
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
